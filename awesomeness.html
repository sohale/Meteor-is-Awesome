<head>
    <title>flo-pok</title>
</head>

<!-- green: success  info:blue    warning:brown?/orange 
messagebox was blue-->
<body>
    <div class="container">
    <h1><tt>flopoke</tt>
         <span class="label label-danger label-lg">F</span
        ><span class="label label-warning">l</span
        ><span class="label label-info">o</span
       ><small><small>.</small></small><span class="label label-success">P</span
        ><span class="label label-primary">o</span
        ><span class="label label-default">k</span>
        </h1> <!--<br/> -->

    <!--(LiveDecide)-->
    {{#if currentUser}}

        <div class="alert alert-warning" role="alert">
        <!-- <h3> -->
        <big>Neighbours list</big>
        </div>

        <ul>
            {{#each nusers}}
                {{>auser}}
            {{/each}}
        </ul>
        <!--
        <hr/>
        -->

        <div class="alert alert-info" role="alert">
        <big>Message box</big>
        </div>


        <div class="panel  panel-primary">
            <!--
            <div class="panel-heading">
                <h3 class="panel-title">Message box</h3>
            </div>
            -->
            <div class="panel-body">
                <form class="new-message">
                    <input type="text" name="text" placeholder="Type a message to broadcast" />
                </form>
                <ul class="list-group">
                    <!-- security issue: content hidden on clientside when not current user -->
                    {{#each msglist}}
                        {{> amessage}}
                    {{/each}}
                </ul>
            </div>
        </div>

        <div class="alert alert-success" role="alert">
        {{> loginButtons}}
        </div>


        <div class="alert alert-warning" role="alert">
        <big>Browse users</big>
        </div>

        <!-- <div role="navigation"> -->
            <!--<h3>Browse users:</h3>-->
            {{#each users}}
                {{>all1user}}
            {{/each}}
        <!-- </div> -->
        <!-- <hr/> -->
        <div class="alert alert-warning" role="alert">
        Experimental (Under progress)
        </div>
        <div>
            Vote: 
            <button>1</button>
            <button>2</button>
            <button>3</button>
            <hr/>
        </div>

  {{#if error}}
    <p>Error: {{error.message}}</p>
  {{/if}}
  
    {{else}}

        <div class="alert alert-warning" role="alert">
        Please log in or wait.
        </div>
        {{> loginButtons}}

    {{/if}}


  </div>
</body>


<template name="auser">
    <li>
    
        <b>{{username}}</b>
        <button class="poke1">poke</button>
        <!--(User {{_id}})-->
        <button class="remove1">remove</button>
    
    </li>
    <!-- Taken from the json-->
    <!-- We canno access the main 'users' table-->
</template>

<template name="all1user">
    <span class="col-lg-2">
    &nbsp; {{username}}
    <button type="button" class="btn btn-default btn-sm" 
    >add</button>
    <!-- {{_id}} -->
    </span>
</template>

<template name="amessage">
    <li class="list-group-item list-group-item-info">
        <!--div class="row"-->
        <b>{{text}}</b>
        <!--{{formatDate createdAt}}-->
        <button type="button" class="btn btn-default btn-sm" >broadcast</button>
        From:{{fromuid}}>>{{touid}}
        <!--/div-->
    </li>
</template>
