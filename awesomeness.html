<head>
    <title>flo-pok</title>
</head>

<body>
    <div class="container">
    <h1>Welcome to flopoke </h1><br/>
    <!--(LiveDecide)-->
    {{#if currentUser}}


        Vote: 
        <button>1</button>
        <button>2</button>
        <button>3</button>
        <hr/>

        <h3>Neighbours list:</h3>
        <ul>
            {{#each nusers}}
                {{>auser}}
            {{/each}}
        </ul>
        <hr/>
        <h3>Message box:</h3>
        <form class="new-message">
            <input type="text" name="text" placeholder="Type a message to broadcast" />
        </form>
        <ul>
            <!-- security issue: content hidden on clientside when not current user -->
            {{#each msglist}}
                {{> amessage}}
            {{/each}}
        </ul>
        <hr/>
        <h3>Browse users:</h3>
        {{#each users}}
            {{>all1user}}
        {{/each}}

    {{else}}
        Please log in.
    {{/if}}

    {{> loginButtons}}

  </div>
</body>


<template name="auser">
    <!--li-->
    <div class="row">
        <b>{{username}}</b>
        <button>poke</button>
        (User {{_id}})
    </div>
    <!--/li-->
    <!-- Taken from the json-->
    <!-- We canno access the main 'users' table-->
</template>

<template name="all1user">
    <span class="col-lg-2">
    &nbsp; {{username}}
    <button>add</button>
    <!-- {{_id}} -->
    </span>
</template>

<template name="amessage">
    <!--li-->
        <div class="row">

        <b>{{text}}</b>
        From:{{fromuid}}>{{touid}}
        <!--{{formatDate createdAt}}-->
        <button>broadcast</button>
        </div>
    <!--/li-->
</template>
